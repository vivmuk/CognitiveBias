<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitive Bias Learning Hub</title>
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="Cog/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="Cog/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="Cog/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="Cog/favicon-96x96.png">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="Cog/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="Cog/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="Cog/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="Cog/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="Cog/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="Cog/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="Cog/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="Cog/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="Cog/apple-icon-180x180.png">
    <link rel="apple-touch-icon" href="Cog/apple-icon.png">
    
    <!-- Android Icons -->
    <link rel="manifest" href="Cog/manifest.json">
    
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#0f3460">
    <meta name="msapplication-TileImage" content="Cog/ms-icon-144x144.png">
    <meta name="msapplication-config" content="Cog/browserconfig.xml">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#0f3460">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Outfit:wght@100..900&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Data -->
    <script src="all-99-biases.js"></script>
</head>

<body>

    <!-- Navigation -->
    <nav class="nav-glass sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div
                    class="w-8 h-8 rounded-sm flex items-center justify-center text-white font-bold shadow-lg"
                    style="background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%);">
                    C</div>
                <span class="text-xl font-bold tracking-tight" style="color: #ffffff;">Cognitive Bias Hub</span>
            </div>
            <div class="flex gap-8 text-sm font-medium" style="color: #b3b3b3;">
                <a href="#" class="pb-1 transition-colors" style="color: #22d3ee; border-bottom: 2px solid #22d3ee;">Library</a>
                <a href="dashboard.html" class="transition-colors hover:opacity-80" style="color: #22d3ee;">Dashboard</a>
                <a href="#" class="transition-colors opacity-50 cursor-not-allowed" style="color: #22d3ee;">Tools</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-gradient py-20 px-6 mb-12 relative">
        <div class="hero-pattern"></div>
        <div class="container mx-auto text-center relative z-10">
            <h1 class="text-5xl md:text-6xl font-bold mb-6 leading-tight">
                Master the Art of <br />
                <span style="color: #fbbf24; text-shadow: 0 2px 10px rgba(251, 191, 36, 0.3);">Clear Thinking</span>
            </h1>
            <p class="text-xl max-w-2xl mx-auto mb-10 font-light" style="color: rgba(255, 255, 255, 0.95);">
                A comprehensive library of 99 cognitive biases to sharpen your decision-making skills.
            </p>

            <!-- Search Box -->
            <div class="search-container">
                <input type="text" id="searchBox" class="search-input"
                    placeholder="Search for a bias (e.g., 'Anchoring', 'Sunk Cost')..." onkeyup="filterBiases()">
                <div class="absolute right-4 top-1/2 transform -translate-y-1/2" style="color: rgba(255, 255, 255, 0.6);">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-6 pb-20">

        <!-- Filters -->
        <div class="flex flex-wrap justify-center gap-3 mb-12" id="categoryFilters">
            <button class="filter-chip active" onclick="filterByCategory('all')">All Biases</button>
            <button class="filter-chip" onclick="filterByCategory('decision-making')">Decision Making</button>
            <button class="filter-chip" onclick="filterByCategory('social')">Social Dynamics</button>
            <button class="filter-chip" onclick="filterByCategory('memory')">Memory & Recall</button>
            <button class="filter-chip" onclick="filterByCategory('probability')">Probability & Logic</button>
        </div>

        <!-- Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 bias-grid" id="biasGrid">
            <!-- Cards populated by JS -->
        </div>

    </main>

    <script>
        // --- Logic ---
        let allBiases = [];
        const progressData = JSON.parse(localStorage.getItem('biasProgress') || '{}');

        // Category mapping with proper categorization
        const categoryMap = {
            'decision-making': [5, 7, 8, 10, 11, 12, 15, 16, 17, 18, 20, 21, 23, 24, 26, 27, 28, 30, 31, 32, 33, 34, 35, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 60, 61, 63, 66, 67, 68, 69, 70, 71, 72, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99],
            'probability': [1, 2, 3, 19, 24, 26, 27, 28, 33, 55, 61, 75, 95],
            'social': [4, 6, 9, 18, 22, 25, 32, 35, 36, 54, 65, 72, 77, 79, 87],
            'memory': [13, 14, 43, 46, 62, 64, 70, 73, 88, 93]
        };

        // Category colors for distinct Material Design cards
        const categoryColors = {
            'decision-making': '#22d3ee',
            'social': '#a78bfa',
            'memory': '#fb923c',
            'probability': '#34d399'
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof all99CognitiveBiases !== 'undefined') {
                allBiases = all99CognitiveBiases.map(enhanceBiasData);
                renderBiasCards(allBiases);
            } else {
                console.error("Data not loaded");
            }
        });

        function enhanceBiasData(bias) {
            // Determine category based on ID mapping
            let category = 'decision-making'; // default
            
            for (const [cat, ids] of Object.entries(categoryMap)) {
                if (ids.includes(bias.id)) {
                    category = cat;
                    break;
                }
            }
            
            // Fallback to title-based detection if not in map
            if (category === 'decision-making') {
                const t = bias.title.toLowerCase();
                if (t.includes('probability') || t.includes('base rate') || t.includes('gambler')) {
                    category = 'probability';
                } else if (t.includes('social') || t.includes('group') || t.includes('reciprocity') || t.includes('authority') || t.includes('liking')) {
                    category = 'social';
                } else if (t.includes('memory') || t.includes('hindsight') || t.includes('story') || t.includes('recency') || t.includes('primacy')) {
                    category = 'memory';
                }
            }

            return { ...bias, category };
        }

        function getCardAccentColor(category) {
            return categoryColors[category] || categoryColors['decision-making'];
        }

        function getCardGlowColor(category) {
            const colors = {
                'decision-making': 'rgba(34, 211, 238, 0.3)',
                'social': 'rgba(167, 139, 250, 0.3)',
                'memory': 'rgba(251, 146, 60, 0.3)',
                'probability': 'rgba(52, 211, 153, 0.3)'
            };
            return colors[category] || colors['decision-making'];
        }

        function renderBiasCards(biases) {
            const grid = document.getElementById('biasGrid');
            grid.innerHTML = '';

            if (biases.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-lg" style="color: #b3b3b3;">No biases found matching your search.</p></div>';
                return;
            }

            biases.forEach((bias, index) => {
                const status = progressData[bias.id] || 'not-started';
                const card = document.createElement('div');

                // Add animation class with stagger
                card.className = 'bias-card animate-fade-in';
                card.style.animationDelay = `${index * 0.05}s`;

                // Make each card distinct with Material Design styling
                const accentColor = getCardAccentColor(bias.category);
                const glowColor = getCardGlowColor(bias.category);
                
                // Unique elevation and glow per card based on ID
                const elevation = 2 + (bias.id % 3);
                const glowIntensity = 0.2 + (bias.id % 5) * 0.05;
                
                card.style.setProperty('--card-accent', accentColor);
                card.style.borderLeft = `4px solid ${accentColor}`;
                card.style.boxShadow = `0 ${elevation * 2}px ${elevation * 4}px rgba(0, 0, 0, 0.4), 0 0 ${elevation * 8}px ${glowColor}`;

                card.onclick = () => {
                    card.style.transform = "scale(0.95)";
                    setTimeout(() => {
                        window.location.href = `bias-${bias.id}.html`;
                    }, 150);
                };

                // Status badge
                let statusBadge = '';
                if (status === 'completed') {
                    statusBadge = '<span class="status-badge status-completed">Mastered</span>';
                } else if (status === 'in-progress') {
                    statusBadge = '<span class="status-badge status-progress">In Progress</span>';
                }

                // Category tag with proper styling
                const categoryLabel = bias.category.replace('-', ' ').split(' ').map(word => 
                    word.charAt(0).toUpperCase() + word.slice(1)
                ).join(' ');

                // Unique card pattern based on ID for Material Design texture
                const patternSize = 30 + (bias.id % 4) * 10;
                const patternOpacity = 0.08 + (bias.id % 3) * 0.02;
                const hexOpacity = Math.floor(patternOpacity * 255).toString(16).padStart(2, '0');

                card.innerHTML = `
                    <div class="bias-card-pattern" style="background-image: radial-gradient(circle, ${accentColor}${hexOpacity} 1px, transparent 1px); background-size: ${patternSize}px ${patternSize}px;"></div>
                    <div class="bias-card-header">
                        <span class="bias-id" style="background: rgba(34, 211, 238, 0.15); border-color: ${accentColor}; color: ${accentColor};">#${bias.id.toString().padStart(2, '0')}</span>
                        ${statusBadge}
                    </div>
                    <h3 class="bias-title">${bias.title}</h3>
                    ${bias.subtitle ? `<p class="text-sm mb-2" style="color: ${accentColor}; font-weight: 500; font-style: italic; font-family: 'Montserrat', sans-serif;">${bias.subtitle}</p>` : ''}
                    <p class="bias-summary">${bias.summary}</p>
                    <div class="bias-card-footer">
                        <span class="category-tag ${bias.category}">${categoryLabel}</span>
                        <span class="explore-link" style="color: ${accentColor};">Explore <span>â†’</span></span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterByCategory(cat) {
            document.querySelectorAll('.filter-chip').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');

            const filtered = allBiases.filter(b => cat === 'all' || b.category === cat);
            renderBiasCards(filtered);
        }

        function filterBiases() {
            const term = document.getElementById('searchBox').value.toLowerCase();
            const filtered = allBiases.filter(b =>
                b.title.toLowerCase().includes(term) ||
                (b.subtitle && b.subtitle.toLowerCase().includes(term)) ||
                b.summary.toLowerCase().includes(term) ||
                b.category.toLowerCase().includes(term)
            );
            renderBiasCards(filtered);
        }
    </script>
</body>

</html>
