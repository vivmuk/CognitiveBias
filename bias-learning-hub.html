<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitive Bias Learning Hub</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="Cog/favicon.ico">

    <!-- Fonts & Styles -->
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Data -->
    <script src="all-99-biases.js"></script>
</head>

<body class="bg-slate-50">

    <!-- Navigation -->
    <nav class="nav-glass sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div
                    class="w-8 h-8 bg-indigo-900 rounded-sm flex items-center justify-center text-white font-serif font-bold shadow-lg">
                    C</div>
                <span class="font-serif text-xl font-bold text-slate-900 tracking-tight">Cognitive Bias Hub</span>
            </div>
            <div class="flex gap-8 text-sm font-medium text-slate-600">
                <a href="#" class="text-indigo-900 border-b-2 border-indigo-900 pb-1">Library</a>
                <a href="dashboard.html" class="hover:text-indigo-900 transition-colors">Dashboard</a>
                <a href="#" class="hover:text-indigo-900 transition-colors opacity-50 cursor-not-allowed">Tools</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-gradient py-20 px-6 mb-12 relative">
        <div class="hero-pattern"></div>
        <div class="container mx-auto text-center relative z-10">
            <h1 class="font-serif text-5xl md:text-6xl font-bold mb-6 leading-tight">
                Master the Art of <br />
                <span class="text-amber-400">Clear Thinking</span>
            </h1>
            <p class="text-indigo-100 text-xl max-w-2xl mx-auto mb-10 font-light">
                A comprehensive library of 99 cognitive biases to sharpen your decision-making skills.
            </p>

            <!-- Search Box -->
            <div class="search-container">
                <input type="text" id="searchBox" class="search-input"
                    placeholder="Search for a bias (e.g., 'Anchoring', 'Sunk Cost')..." onkeyup="filterBiases()">
                <div class="absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-6 pb-20">

        <!-- Filters -->
        <div class="flex flex-wrap justify-center gap-3 mb-12" id="categoryFilters">
            <button class="filter-chip active" onclick="filterByCategory('all')">All Biases</button>
            <button class="filter-chip" onclick="filterByCategory('decision-making')">Decision Making</button>
            <button class="filter-chip" onclick="filterByCategory('social')">Social Dynamics</button>
            <button class="filter-chip" onclick="filterByCategory('memory')">Memory & Recall</button>
            <button class="filter-chip" onclick="filterByCategory('probability')">Probability & Logic</button>
        </div>

        <!-- Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 bias-grid" id="biasGrid">
            <!-- Cards populated by JS -->
        </div>

    </main>

    <script>
        // --- Logic ---
        let allBiases = [];
        const progressData = JSON.parse(localStorage.getItem('biasProgress') || '{}');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof all99CognitiveBiases !== 'undefined') {
                allBiases = all99CognitiveBiases.map(enhanceBiasData);
                renderBiasCards(allBiases);
            } else {
                console.error("Data not loaded");
            }
        });

        function enhanceBiasData(bias) {
            // Add category logic here (simplified for brevity, same as before)
            let category = 'decision-making';
            const t = bias.title.toLowerCase();
            const id = bias.id;

            if (t.includes('probability') || t.includes('base rate') || [1, 2, 3, 19, 24, 26, 27, 33, 55, 95].includes(id)) category = 'probability';
            else if (t.includes('social') || t.includes('group') || [4, 6, 9, 18, 22, 25, 32, 35, 36, 65, 72].includes(id)) category = 'social';
            else if (t.includes('memory') || t.includes('hindsight') || [13, 14, 43, 46, 62, 64, 70, 73, 88].includes(id)) category = 'memory';

            return { ...bias, category };
        }

        function renderBiasCards(biases) {
            const grid = document.getElementById('biasGrid');
            grid.innerHTML = '';

            biases.forEach((bias, index) => {
                const status = progressData[bias.id] || 'not-started';
                const card = document.createElement('div');

                // Add animation class with stagger
                card.className = 'bias-card animate-fade-in';
                card.style.animationDelay = `${index * 0.05}s`; // Stagger effect

                card.onclick = () => {
                    // "Fun" interaction: slight bounce before nav
                    card.style.transform = "scale(0.95)";
                    setTimeout(() => {
                        window.location.href = `bias-${bias.id}.html`;
                    }, 150);
                };

                let statusBadge = '';
                if (status === 'completed') {
                    statusBadge = `<span class="status-badge status-completed">Mastered</span>`;
                } else if (status === 'in-progress') {
                    statusBadge = `<span class="status-badge status-progress">In Progress</span>`;
                }

                card.innerHTML = `
                    <div class="bias-card-header">
                        <span class="bias-id">#${bias.id}</span>
                        ${statusBadge}
                    </div>
                    <h3 class="bias-title">${bias.title}</h3>
                    <p class="bias-summary">${bias.summary}</p>
                    <div class="mt-4 flex justify-between items-center pt-4 border-t border-slate-100">
                        <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">${bias.category.replace('-', ' ')}</span>
                        <span class="text-indigo-600 text-sm font-bold group-hover:translate-x-1 transition-transform">Explore â†’</span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterByCategory(cat) {
            document.querySelectorAll('.filter-chip').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');

            const filtered = allBiases.filter(b => cat === 'all' || b.category === cat);
            renderBiasCards(filtered);
        }

        function filterBiases() {
            const term = document.getElementById('searchBox').value.toLowerCase();
            const filtered = allBiases.filter(b =>
                b.title.toLowerCase().includes(term) ||
                b.summary.toLowerCase().includes(term)
            );
            renderBiasCards(filtered);
        }
    </script>
</body>

</html>